<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>百度外卖</title>
  <script>
    // 页面打开 立即计算
    document.querySelector('html').style.fontSize = window.screen.width / 20 + 'px';
    // 尺寸更改也会重新计算
    // 这里 写这个事件的目的是 是为了让我们在桌面端测试时 可以自动计算 移动端
    window.onresize = function(){
        document.querySelector('html').style.fontSize = window.screen.width / 20 + 'px';
    }
</script>
  <!-- 导入 swiper的 css -->
  <link rel="stylesheet" type="text/css" href="css/index.css" />
</head>

<body>
  <!-- loading页面 -->
  <div class="loading">
    <div class="rider"></div>
    <div class="progress">
        <div class="step"></div>
    </div>
    <div class="info"></div>
    <!-- 外卖的logo -->
    <div class="logo"></div>
    <!-- 版权信息 -->
    <div class="copyright">
        @2021 DuBai Waimai Produced
    </div>
</div>
<!-- 欢迎页布局 -->
<div class="welcome">
    <div class="info">
        <div class="hello"></div>
    </div>
    <!-- 云 -->
    <div class="cloud"></div>
    <!-- 草地 -->
    <div class="grass1"></div>
    <!-- 熊笼 -->
    <div class="bear-box">
        <div class="bear"></div>
        <div class="smoke"></div>
    </div>
    <!-- 树 -->
    <div class="trees"></div>
    <!-- 草 -->
    <div class="grass2"></div>

    <!-- 旋转的按钮 -->
    <div class="rotate-btn-box">
        <div class="btn"></div>
        <div class="circle1"></div>
        <div class="circle2"></div>
    </div>
</div>

<!-- swiper的结构 -->
<div class="waimai-container">
    <div class="swiper-wrapper">
        <!-- 轮播页面1 -->
        <div class="swiper-slide page1">
            <div class="title">
                <h3>生活中</h3>
                <p>偶尔会这样哦...</p>
                <div class="line"></div>
            </div>
            <!-- 轮播的盒子1 -->
            <div class="scroll-page1">
                <div class="bg"></div>
                <div class="person">
                    <!-- 一摞纸 -->
                    <div class="files">
                        <!-- 纸1 -->
                        <div class="paper1"></div>
                        <!-- 纸2 -->
                        <div class="paper2"></div> 
                    </div>
                </div>
                
                <div class="message-container">
                    <div class="info"></div>
                </div>
            </div>
            <!-- 轮播的盒子2 -->
            <div class="scroll-page2">
                <div class="bg"></div>
                <div class="person">
                    <div class="leg1"></div>
                    <div class="leg2"></div>
                </div>
                <div class="message-container">
                    <div class="info"></div>
                </div>
            </div>
            <!-- 轮播的盒子3 -->
            <div class="scroll-page3">
                <div class="bg"></div>
                <div class="person">
                   <div class="word1"></div>
                   <div class="word2"></div>
                   <div class="word3"></div>
                   <div class="word4"></div>
                </div>
                <div class="message-container">
                    <div class="info"></div>
                </div>
            </div>
            <!-- 因为都有球所以放在外面 -->
            <div class="sphere"></div>
            <!-- 熊 -->
            <div class="bear"></div>
        </div>
        <!-- 轮播页面2 -->
        <div class="swiper-slide page2">
            <div class="title">
                <h3>这时候</h3>
                <p>如果有一份美味的外卖...<br>正好出现...</p>
                <div class="line"></div>
            </div>
            <div class="bg"></div>
            <div class="bear">
                <div class="face1"></div>
                <div class="face2"></div>
                <!-- 熊掌 -->
                <div class="hand-left"></div>
                <div class="hand-right"></div>
            </div>
            <div class="sphere"></div>
            <div class="table"></div>
            <div class="food"></div>
        </div>
        <!-- 轮播页面3 -->
        <div class="swiper-slide page3">
            <div class="title">
                <h3>这个时候</h3>
                <p>如果有一份美味的西兰花<br>炒饭就郁郁驱散热草...</p>
                <div class="line"></div>
            </div>
            <!-- 背景 -->
            <div class="bg"></div>
            <!-- 熊 -->
            <div class="bear"></div>
            <!-- t牌子的熊 -->
            <div class="animation-bear-box">
                <div class="animate-bear1"></div>
                <div class="animate-bear2"></div>
                <div class="animate-bear3"></div>
            </div>
            <!-- 星球 -->
            <div class="sphere"></div>
            <!-- 牌子1 -->
            <div class="normal-card">
                <div class="license"></div>
                <div class="oil"></div>
                <div class="evil"></div>
            </div>
            <!-- 添加 t了之后的 三块牌子 -->
            <div class="hit-card-box">
                <div class="card1"></div>
                <div class="card2"></div>
                <div class="card3"></div>
            </div>
        </div>
        <!-- 轮播页面4 -->
        <div class="swiper-slide page4">
            <div class="title">
                <h3>度百外卖</h3>
                <p>只做有品质的外卖...<br>操作快捷...</p>
                <div class="line"></div>
            </div>
            <div class="bg"></div>
            <div class="bear"></div>
            <div class="sphere"></div>
            <div class="card1"></div>
            <div class="card2"></div>
            <div class="card3"></div>
        </div>
        <!-- 轮播页面5 -->
        <div class="swiper-slide page5">
            <div class="title">
                <h3>无论前方</h3>
                <p>狂风，大雨，还是飘雪...<br>始终坚持在路上...</p>
                <div class="line"></div>
            </div>
            <div class="bg"></div>
            <div class="bear">
                <div class="smoke"></div>
            </div>
            <div class="sphere"></div>
            <div class="cloud">
                <!-- 添加雪片 -->
                <div class="snow"></div>
                <div class="snow"></div>
                <div class="snow"></div>
                <div class="snow"></div>
                <div class="snow"></div>
                <div class="snow"></div>
            </div>
        </div>
        <!-- 轮播页面6 -->
        <div class="swiper-slide page6">
            <div class="title">
                <h3>丰富礼品,</h3>
                <p>让你边吃，边省钱...</p>
                <div class="line"></div>
            </div>
            <div class="bg"></div>
            <div class="bear">
                <div class="gift-box">
                    <div><div class="gift1"></div></div>
                    <div><div class="gift2"></div></div>
                    <div><div class="gift3"></div></div>
                    <div><div class="gift4"></div></div>
                    <div><div class="gift5"></div></div>
                    <div><div class="gift6"></div></div>
                    <div><div class="gift7"></div></div>
                    <div><div class="gift8"></div></div>
                    <div><div class="gift9"></div></div>
                    <div><div class="gift10"></div></div>
                    <div><div class="gift11"></div></div>
                    <div><div class="gift12"></div></div>
                </div>
            </div>
            <div class="sphere"></div>
        </div>
        <!-- 轮播页面7 -->
        <div class="swiper-slide page7">
            <div class="title">
                <h3>所有的努力</h3>
                <p>就是为了健康美味的外卖...<br>呈现给你...</p>
                <div class="line"></div>
            </div>
            <div class="streetlight">
                <div class="light"></div>
            </div>
            <div class="motobike"></div>
            <div class="sphere"></div>
            <div class="bear"></div>
            <div class="share"></div>
            <div class="info">waimai.dubai.com</div>
        </div>
    </div> 
</div>

<!-- 音频播放按钮 -->
<audio loop src="music/hlw.mp3">
</audio>
<input type="button" class="audioControl">

</body>

</html>
<script type="text/javascript" src="lib/swiper/swiper.min.js"></script>

<!-- 导入 zepto -->
<script src="lib/zepto/zepto.js"></script>
<script src="lib/zepto/event.js"></script>
<script src="lib/zepto/fx.js"></script>
<script src="lib/zepto/touch.js"></script>
<!-- 提供了 fadeout方法 -->
<script src="lib/zepto/fx_methods.js"></script>

<script type="text/javascript">
    // 使用 swiper 实现 滑动切换效果
    var swiper = new Swiper('.waimai-container',{
        direction:'vertical',
        // 添加回调函数
        onSlideChangeEnd:function(swiper){
            // alert(swiper.activeIndex);
            $('.swiper-slide').eq(swiper.activeIndex).addClass('animate').siblings().removeClass('animate');

            // 判断是否 滑动到了 第三页 索引为2
            if(swiper.activeIndex == 2){
                console.log('哥们，别划了');
                $('.swiper-slide').eq(2).addClass('swiper-no-swiping');
            }
            
            // 获取 我们上一页的 索引值
            if(swiper.previousIndex == 2){
                console.log('说明用户刚刚看完第三页 索引值为2的那一页');

                // 还原我们设置的 所有行内样式
                $('.swiper-slide').eq(2).find('.bear').attr('style','');
                $('.animation-bear-box div').attr('style','');
                $('.normal-card div').attr('style','');
                $('.hit-card-box div').attr('style','');
            }
        }
    });

    //  1.页面打开 稍等一会 开启定时器
    $(function(){
        // 第一页的js效果
        setTimeout(function(){
            $('.loading').addClass('animate');
            // 使用js的方式演示
            // document.querySelector('.loading .step').addEventListener('animationend',function(){
            //     console.log('我播完了');
            // }) 
            $('.loading .step').on('animationend',function(){
                console.log('jq绑定 end');
                $('.loading').fadeOut(100,function(){
                    $('.welcome').addClass('animate');
                });
            })
        },1000)
       
        // 第二页的js效果
        $('.welcome .rotate-btn-box').longTap(function(){
            console.log('按了好久');
            // zepto 添加 css中的 animation动画
            $('.bear-box').css('animation','bearDisappear 1s forwards');
            setTimeout(function(){
                $('.welcome').fadeOut(1000,function(){
                // 为 swiper 的第一页 添加 animate class
                $('.page1').addClass('animate');
            });
            },1000)
        })
    
        // swiper 的第三页 索引为2
        $('.swiper-slide').eq(2).click(function(){
            console.log('你点我了');
            $(this).removeClass('swiper-no-swiping');
            // 把中间的熊给隐藏了
            // 无法清除的原因是 动画
            $('.swiper-slide').eq(2).children('.bear').css('animation','none');
                var index = 0;
                interId = setInterval(function(){
                    // t牌子1 2 3
                    $('.animation-bear-box div').css('opacity',0);
                    $('.animation-bear-box div').eq(index).css('opacity',1);

                    // 隐藏 normal-card 容器中的配置
                    $('.normal-card div').eq(index).css('animation','none');

                    // t的同时 把card的显示 进行切换
                    $('.hit-card-box div').eq(index).css('opacity',1);

                    // 当index == 2时 就开始t最后一张 
                    if(index==2){
                        clearInterval(interId);
                        // 往下掉
                        $('.hit-card-box div').css('animation','bearDisappear 1s forwards')
                        // 掉完了 开启 滑动
                        setTimeout(function(){
                            $('.swiper-slide').eq(2).removeClass('swiper-no-swiping');
                        }, 1000);
                    }

                    // index 要累加
                    index++;
                }, 1000);
        })
    })       

    // 为按钮绑定点击事件 控制音频播放
    var audioDom = document.querySelector('audio');

    $('.audioControl').click(function(){
        if(audioDom.paused == true){
            // play paused 都是 dom元素的语法
            audioDom.play();
            $(this).css('background-image','url(image/pause.png)');
        }else{
            audioDom.pause();
            $(this).css('background-image','url(image/play.png)');
        }
    })
</script>